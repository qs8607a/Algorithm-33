动态规划---最优二叉查找树
=========

1、问题描述：

给定一个有序序列K={k1<k2<k3<,……,<kn}和他们被查询的概率P={p1,p2,p3,……,pn}，要求构造一棵二叉查找树T，使得查询所有元素的总的代价最小。对于一个搜索树，当搜索的元素在树内时，表示搜索成功。当不在树内时，表示搜索失败，用一个“虚叶子节点”来标示搜索失败的情况，因此需要n+1个虚叶子节点{d0<d1<……<dn}。其中d0表示搜索元素小于k1的失败结果，dn表示搜索元素大于kn的失败情况。di（0<i<n）表示搜索节点在ki和k(i+1)之间时的失败情况。对于应di的概率序列是Q={q0,q1,……,qn}。

注意：最优二叉查找树不一定是一棵整体高度最小的树，也不一定把有最大概率的关键字放在根部来构造一棵二叉查找树。

若用穷举搜索，时间复杂度是：O(4^n/n^(3/2))。

2、问题分析：

在二叉树中T内搜索一次的期望代价为：
E[T]=
         (depth(ki)+1)*pi  //对每个i=1~n，搜索成功情况
       +(depth(di)+1)*qi //对每个i=0~n，搜索失败情况

3、问题求解：动态规划

步骤一：寻找最优子结构。

一个最优二叉树的子树必定包含连续范围的关键字ki~kj，1<=i<=j<=n，同时也必须含有连续的虚叶子节点di-1~dj。如果一棵最优二叉查找树T有一棵含有关键字ki~kj的子树T'，那么，T'也是一棵最优查找树，这通过剪贴思想可以证明。

现在开始构造最优子结构：在ki~kj中，选定一个r,i<=r<=j，使以kr为根，ki~k(r-1)和k(r+1)~kj为左右孩子的最优二叉树。注意r=i或者r=j的情况，表示左子树或右子树只有虚叶子节点。
